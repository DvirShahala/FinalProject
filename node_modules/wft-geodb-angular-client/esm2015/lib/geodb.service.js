/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { HttpClient, HttpParams } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { GeoDbConfig } from './model/geodb-config.model';
export class GeoDbService {
    /**
     * @param {?} httpClient
     * @param {?} config
     */
    constructor(httpClient, config) {
        this.httpClient = httpClient;
        this.config = config;
        this.adminDivisionsEndpoint = config.serviceUri + 'v1/geo/adminDivisions';
        this.countriesEndpoint = config.serviceUri + '/v1/geo/countries';
        this.currenciesEndpoint = config.serviceUri + '/v1/locale/currencies';
        this.languagesEndpoint = config.serviceUri + '/v1/locale/languages';
        this.localesEndpoint = config.serviceUri + '/v1/locale/locales';
        this.placesEndpoint = config.serviceUri + '/v1/geo/cities';
        this.timeZonesEndpoint = config.serviceUri + '/v1/locale/timezones';
    }
    /**
     * @private
     * @param {?} request
     * @return {?}
     */
    static buildPagingParams(request) {
        return new HttpParams()
            .set('offset', '' + request.offset)
            .set('limit', '' + request.limit)
            .set('hateoasMode', 'false');
    }
    /**
     * @private
     * @param {?} nearLocation
     * @return {?}
     */
    static toLocationString(nearLocation) {
        /** @type {?} */
        let locationString = '';
        if (nearLocation.latitude > 0) {
            locationString += '+';
        }
        locationString += nearLocation.latitude;
        if (nearLocation.longitude > 0) {
            locationString += '+';
        }
        locationString += nearLocation.longitude;
        return locationString;
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findAdminDivisions(request) {
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        if (request.countryIds) {
            params = params.set('countryIds', request.countryIds.join(','));
        }
        if (request.excludedCountryIds) {
            params = params.set('excludedCountryIds', request.excludedCountryIds.join(','));
        }
        if (request.namePrefix) {
            params = params.set('namePrefix', request.namePrefix);
        }
        if (request.minPopulation) {
            params = params.set('minPopulation', '' + request.minPopulation);
        }
        if (request.timeZoneIds) {
            params = params.set('timeZoneIds', request.timeZoneIds.join(','));
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        if (request.sortDirectives) {
            params = params.set('sort', request.sortDirectives.join(','));
        }
        if (request.includeDeleted) {
            params = params.set('includeDeleted', request.includeDeleted);
        }
        return this.httpClient.get(this.adminDivisionsEndpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findPlace(request) {
        /** @type {?} */
        const endpoint = this.buildPlaceEndpoint(request.placeId);
        /** @type {?} */
        let params = new HttpParams();
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findPlaces(request) {
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        if (request.countryIds) {
            params = params.set('countryIds', request.countryIds.join(','));
        }
        if (request.excludedCountryIds) {
            params = params.set('excludedCountryIds', request.excludedCountryIds.join(','));
        }
        if (request.namePrefix) {
            params = params.set('namePrefix', request.namePrefix);
        }
        if (request.minPopulation) {
            params = params.set('minPopulation', '' + request.minPopulation);
        }
        if (request.timeZoneIds) {
            params = params.set('timeZoneIds', request.timeZoneIds.join(','));
        }
        if (request.types) {
            params = params.set('types', request.types.join(','));
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        if (request.sortDirectives) {
            params = params.set('sort', request.sortDirectives.join(','));
        }
        if (request.includeDeleted) {
            params = params.set('includeDeleted', request.includeDeleted);
        }
        return this.httpClient.get(this.placesEndpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findPlacesNearLocation(request) {
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        params = params
            .set('radius', '' + request.location.radius)
            .set('distanceUnit', request.location.distanceUnit);
        if (request.minPopulation) {
            params = params.set('minPopulation', '' + request.minPopulation);
        }
        if (request.namePrefix) {
            params = params.set('namePrefix', request.namePrefix);
        }
        if (request.types) {
            params = params.set('types', request.types.join(','));
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        if (request.sortDirectives) {
            params = params.set('sort', request.sortDirectives.join(','));
        }
        if (request.includeDeleted) {
            params = params.set('includeDeleted', request.includeDeleted);
        }
        // Workaround for HttpClient '+' encoding bug.
        /** @type {?} */
        const locationId = GeoDbService
            .toLocationString(request.location)
            .replace('+', '%2B');
        /** @type {?} */
        const endpoint = this.placesEndpoint + '?location=' + locationId;
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findPlacesNearPlace(request) {
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        params = params
            .set('radius', '' + request.radius)
            .set('distanceUnit', request.distanceUnit);
        if (request.minPopulation) {
            params = params.set('minPopulation', '' + request.minPopulation);
        }
        if (request.types) {
            params = params.set('types', request.types.join(','));
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        if (request.sortDirectives) {
            params = params.set('sort', request.sortDirectives.join(','));
        }
        if (request.includeDeleted) {
            params = params.set('includeDeleted', request.includeDeleted);
        }
        /** @type {?} */
        const endpoint = this.placesEndpoint + '/' + request.placeId + '/nearbyCities';
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findCountries(request) {
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        if (request.currencyCode) {
            params = params.set('currencyCode', request.currencyCode);
        }
        if (request.namePrefix) {
            params = params.set('namePrefix', request.namePrefix);
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        return this.httpClient.get(this.countriesEndpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findCountry(request) {
        /** @type {?} */
        const endpoint = this.countriesEndpoint + '/' + request.countryId;
        /** @type {?} */
        let params = new HttpParams();
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findCurrencies(request) {
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        if (request.countryId) {
            params = params.set('countryId', request.countryId);
        }
        return this.httpClient.get(this.currenciesEndpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findLanguages(request) {
        /** @type {?} */
        const params = GeoDbService.buildPagingParams(request);
        return this.httpClient.get(this.languagesEndpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findLocales(request) {
        /** @type {?} */
        const params = GeoDbService.buildPagingParams(request);
        return this.httpClient.get(this.localesEndpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findRegion(request) {
        /** @type {?} */
        const endpoint = this.buildRegionsEndpoint(request.countryId) + '/' + request.regionCode;
        /** @type {?} */
        let params = new HttpParams();
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findRegionPlaces(request) {
        /** @type {?} */
        const endpoint = this.buildRegionEndpoint(request.countryId, request.regionCode) + '/cities';
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        if (request.minPopulation) {
            params = params.set('minPopulation', '' + request.minPopulation);
        }
        if (request.types) {
            params = params.set('types', request.types.join(','));
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        if (request.sortDirectives) {
            params = params.set('sort', request.sortDirectives.join(','));
        }
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findRegions(request) {
        /** @type {?} */
        const endpoint = this.buildRegionsEndpoint(request.countryId);
        /** @type {?} */
        let params = GeoDbService.buildPagingParams(request);
        if (request.namePrefix) {
            params = params.set('namePrefix', request.namePrefix);
        }
        if (request.asciiMode) {
            params = params.set('asciiMode', '' + request.asciiMode);
        }
        if (request.languageCode) {
            params = params.set('languageCode', request.languageCode);
        }
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} request
     * @return {?}
     */
    findTimeZones(request) {
        /** @type {?} */
        const params = GeoDbService.buildPagingParams(request);
        return this.httpClient.get(this.timeZonesEndpoint, {
            params: params
        });
    }
    /**
     * @return {?}
     */
    get apiKey() {
        return this.config.apiKey;
    }
    /**
     * @param {?} apiKey
     * @return {?}
     */
    setApiKey(apiKey) {
        this.config.apiKey = apiKey;
    }
    /**
     * @param {?} id
     * @return {?}
     */
    getPlaceDateTime(id) {
        /** @type {?} */
        const endpoint = this.buildPlaceEndpoint(id) + '/dateTime';
        return this.httpClient.get(endpoint);
    }
    /**
     * @param {?} request
     * @return {?}
     */
    getPlaceDistance(request) {
        /** @type {?} */
        const endpoint = this.buildPlaceEndpoint(request.toPlaceId) + '/distance';
        /** @type {?} */
        const params = new HttpParams()
            .set('fromPlaceId', '' + request.fromPlaceId)
            .set('distanceUnit', '' + request.distanceUnit);
        return this.httpClient.get(endpoint, {
            params: params
        });
    }
    /**
     * @param {?} placeId
     * @return {?}
     */
    getPlaceTime(placeId) {
        /** @type {?} */
        const endpoint = this.buildPlaceEndpoint(placeId) + '/time';
        return this.httpClient.get(endpoint);
    }
    /**
     * @param {?} zoneId
     * @return {?}
     */
    getTimeZoneDateTime(zoneId) {
        /** @type {?} */
        const endpoint = this.buildTimeZoneEndpoint(zoneId) + '/dateTime';
        return this.httpClient.get(endpoint);
    }
    /**
     * @param {?} zoneId
     * @return {?}
     */
    getTimeZoneTime(zoneId) {
        /** @type {?} */
        const endpoint = this.buildTimeZoneEndpoint(zoneId) + '/time';
        return this.httpClient.get(endpoint);
    }
    /**
     * @private
     * @param {?} olaceId
     * @return {?}
     */
    buildPlaceEndpoint(olaceId) {
        return this.placesEndpoint + '/' + olaceId;
    }
    /**
     * @private
     * @param {?} countryId
     * @param {?} regionCode
     * @return {?}
     */
    buildRegionEndpoint(countryId, regionCode) {
        return this.buildRegionsEndpoint(countryId) + '/' + regionCode;
    }
    /**
     * @private
     * @param {?} countryId
     * @return {?}
     */
    buildRegionsEndpoint(countryId) {
        return this.countriesEndpoint + '/' + countryId + '/regions';
    }
    /**
     * @private
     * @param {?} zoneId
     * @return {?}
     */
    buildTimeZoneEndpoint(zoneId) {
        return this.timeZonesEndpoint + '/' + zoneId;
    }
}
GeoDbService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
GeoDbService.ctorParameters = () => [
    { type: HttpClient },
    { type: GeoDbConfig }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.adminDivisionsEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.countriesEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.currenciesEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.languagesEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.localesEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.placesEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.timeZonesEndpoint;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.httpClient;
    /**
     * @type {?}
     * @private
     */
    GeoDbService.prototype.config;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VvZGIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3dmdC1nZW9kYi1hbmd1bGFyLWNsaWVudC8iLCJzb3VyY2VzIjpbImxpYi9nZW9kYi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxPQUFPLEVBQUMsVUFBVSxFQUFFLFVBQVUsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQzVELE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFTekMsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBc0J2RCxNQUFNLE9BQU8sWUFBWTs7Ozs7SUFTdkIsWUFBb0IsVUFBc0IsRUFBVSxNQUFtQjtRQUFuRCxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBYTtRQUVyRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDLFVBQVUsR0FBRyx1QkFBdUIsQ0FBQztRQUMxRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLFVBQVUsR0FBRyxtQkFBbUIsQ0FBQztRQUNqRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxDQUFDLFVBQVUsR0FBRyx1QkFBdUIsQ0FBQztRQUN0RSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLFVBQVUsR0FBRyxzQkFBc0IsQ0FBQztRQUNwRSxJQUFJLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxVQUFVLEdBQUcsb0JBQW9CLENBQUM7UUFDaEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDO1FBQzNELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsVUFBVSxHQUFHLHNCQUFzQixDQUFDO0lBQ3RFLENBQUM7Ozs7OztJQUVPLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxPQUE4QjtRQUU3RCxPQUFPLElBQUksVUFBVSxFQUFFO2FBQ3BCLEdBQUcsQ0FBQyxRQUFR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Q0FBQyxHQUFHLENBQXNCLFFBQVEsQ0FBQyxDQUFDO0lBQzVELENBQUM7Ozs7OztJQUVPLGtCQUFrQixDQUFDLE9BQWU7UUFDeEMsT0FBTyxJQUFJLENBQUMsY0FBYyxHQUFHLEdBQUcsR0FBRyxPQUFPLENBQUM7SUFDN0MsQ0FBQzs7Ozs7OztJQUVPLG1CQUFtQixDQUFDLFNBQWlCLEVBQUUsVUFBa0I7UUFDL0QsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLEdBQUcsR0FBRyxHQUFHLFVBQVUsQ0FBQztJQUNqRSxDQUFDOzs7Ozs7SUFFTyxvQkFBb0IsQ0FBQyxTQUFpQjtRQUM1QyxPQUFPLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLEdBQUcsU0FBUyxHQUFHLFVBQVUsQ0FBQztJQUMvRCxDQUFDOzs7Ozs7SUFFTyxxQkFBcUIsQ0FBQyxNQUFjO1FBQzFDLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUM7SUFDL0MsQ0FBQzs7O1lBL2ZGLFVBQVU7Ozs7WUEvQkgsVUFBVTtZQVVWLFdBQVc7Ozs7Ozs7SUF1QmpCLDhDQUF1Qzs7Ozs7SUFDdkMseUNBQWtDOzs7OztJQUNsQywwQ0FBbUM7Ozs7O0lBQ25DLHlDQUFrQzs7Ozs7SUFDbEMsdUNBQWdDOzs7OztJQUNoQyxzQ0FBK0I7Ozs7O0lBQy9CLHlDQUFrQzs7Ozs7SUFFdEIsa0NBQThCOzs7OztJQUFFLDhCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7SHR0cENsaWVudCwgSHR0cFBhcmFtc30gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHtJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtQbGFjZURldGFpbHN9IGZyb20gJy4vbW9kZWwvcGxhY2UtZGV0YWlscy5tb2RlbCc7XG5pbXBvcnQge1BsYWNlU3VtbWFyeX0gZnJvbSAnLi9tb2RlbC9wbGFjZS1zdW1tYXJ5Lm1vZGVsJztcbmltcG9ydCB7Q291bnRyeVN1bW1hcnl9IGZyb20gJy4vbW9kZWwvY291bnRyeS1zdW1tYXJ5Lm1vZGVsJztcbmltcG9ydCB7R2VvUmVzcG9uc2V9IGZyb20gJy4vbW9kZWwvZ2VvLXJlc3BvbnNlLm1vZGVsJztcbmltcG9ydCB7TmVhckxvY2F0aW9uUmVxdWVzdH0gZnJvbSAnLi9yZXF1ZXN0L25lYXItbG9jYXRpb24tcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge1JlZ2lvblN1bW1hcnl9IGZyb20gJy4vbW9kZWwvcmVnaW9uLXN1bW1hcnkubW9kZWwnO1xuXG5pbXBvcnQge0dlb0RiQ29uZmlnfSBmcm9tICcuL21vZGVsL2dlb2RiLWNvbmZpZy5tb2RlbCc7XG5pbXBvcnQge0NvdW50cnlEZXRhaWxzfSBmcm9tICcuL21vZGVsL2NvdW50cnktZGV0YWlscy5tb2RlbCc7XG5pbXBvcnQge1JlZ2lvbkRldGFpbHN9IGZyb20gJy4vbW9kZWwvcmVnaW9uLWRldGFpbHMubW9kZWwnO1xuaW1wb3J0IHtDdXJyZW5jeX0gZnJvbSAnLi9tb2RlbC9jdXJyZW5jeS5tb2RlbCc7XG5pbXBvcnQge0xvY2FsZX0gZnJvbSAnLi9tb2RlbC9sb2NhbGUubW9kZWwnO1xuaW1wb3J0IHtGaW5kQWRtaW5EaXZpc2lvbnNSZXF1ZXN0fSBmcm9tICcuL3JlcXVlc3QvZmluZC1hZG1pbi1kaXZpc2lvbnMtcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge0ZpbmRQbGFjZXNSZXF1ZXN0fSBmcm9tICcuL3JlcXVlc3QvZmluZC1wbGFjZXMtcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge0ZpbmRDb2xsZWN0aW9uUmVxdWVzdH0gZnJvbSAnLi9yZXF1ZXN0L2ZpbmQtY29sbGVjdGlvbi1yZXF1ZXN0Lm1vZGVsJztcbmltcG9ydCB7RmluZENvdW50cmllc1JlcXVlc3R9IGZyb20gJy4vcmVxdWVzdC9maW5kLWNvdW50cmllcy1yZXF1ZXN0Lm1vZGVsJztcbmltcG9ydCB7RmluZEN1cnJlbmNpZXNSZXF1ZXN0fSBmcm9tICcuL3JlcXVlc3QvZmluZC1jdXJyZW5jaWVzLXJlcXVlc3QubW9kZWwnO1xuaW1wb3J0IHtGaW5kUmVnaW9uc1JlcXVlc3R9IGZyb20gJy4vcmVxdWVzdC9maW5kLXJlZ2lvbnMtcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge0ZpbmRSZWdpb25DaXRpZXNSZXF1ZXN0fSBmcm9tICcuL3JlcXVlc3QvZmluZC1yZWdpb24tY2l0aWVzLXJlcXVlc3QubW9kZWwnO1xuaW1wb3J0IHtGaW5kUGxhY2VzTmVhclBsYWNlUmVxdWVzdH0gZnJvbSAnLi9yZXF1ZXN0L2ZpbmQtcGxhY2VzLW5lYXItcGxhY2UtcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge1RpbWVab25lfSBmcm9tICcuL21vZGVsL3RpbWUtem9uZS5tb2RlbCc7XG5pbXBvcnQge0dldFBsYWNlRGlzdGFuY2VSZXF1ZXN0fSBmcm9tICcuL3JlcXVlc3QvZ2V0LXBsYWNlLWRpc3RhbmNlLXJlcXVlc3QubW9kZWwnO1xuaW1wb3J0IHtGaW5kUGxhY2VzTmVhckxvY2F0aW9uUmVxdWVzdH0gZnJvbSAnLi9yZXF1ZXN0L2ZpbmQtcGxhY2VzLW5lYXItbG9jYXRpb24tcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge0dldFBsYWNlRGV0YWlsc1JlcXVlc3R9IGZyb20gJy4vcmVxdWVzdC9nZXQtcGxhY2UtZGV0YWlscy1yZXF1ZXN0Lm1vZGVsJztcbmltcG9ydCB7R2V0Q291bnRyeURldGFpbHNSZXF1ZXN0fSBmcm9tICcuL3JlcXVlc3QvZ2V0LWNvdW50cnktZGV0YWlscy1yZXF1ZXN0Lm1vZGVsJztcbmltcG9ydCB7R2V0UmVnaW9uRGV0YWlsc1JlcXVlc3R9IGZyb20gJy4vcmVxdWVzdC9nZXQtcmVnaW9uLWRldGFpbHMtcmVxdWVzdC5tb2RlbCc7XG5pbXBvcnQge0xhbmd1YWdlfSBmcm9tICcuL21vZGVsL2xhbmd1YWdlLm1vZGVsJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEdlb0RiU2VydmljZSB7XG4gIHByaXZhdGUgYWRtaW5EaXZpc2lvbnNFbmRwb2ludDogc3RyaW5nO1xuICBwcml2YXRlIGNvdW50cmllc0VuZHBvaW50OiBzdHJpbmc7XG4gIHByaXZhdGUgY3VycmVuY2llc0VuZHBvaW50OiBzdHJpbmc7XG4gIHByaXZhdGUgbGFuZ3VhZ2VzRW5kcG9pbnQ6IHN0cmluZztcbiAgcHJpdmF0ZSBsb2NhbGVzRW5kcG9pbnQ6IHN0cmluZztcbiAgcHJpdmF0ZSBwbGFjZXNFbmRwb2ludDogc3RyaW5nO1xuICBwcml2YXRlIHRpbWVab25lc0VuZHBvaW50OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBwcml2YXRlIGNvbmZpZzogR2VvRGJDb25maWcpIHtcblxuICAgIHRoaXMuYWRtaW5EaXZpc2lvbnNFbmRwb2ludCA9IGNvbmZpZy5zZXJ2aWNlVXJpICsgJ3YxL2dlby9hZG1pbkRpdmlzaW9ucyc7XG4gICAgdGhpcy5jb3VudHJpZXNFbmRwb2ludCA9IGNvbmZpZy5zZXJ2aWNlVXJpICsgJy92MS9nZW8vY291bnRyaWVzJztcbiAgICB0aGlzLmN1cnJlbmNpZXNFbmRwb2ludCA9IGNvbmZpZy5zZXJ2aWNlVXJpICsgJy92MS9sb2NhbGUvY3VycmVuY2llcyc7XG4gICAgdGhpcy5sYW5ndWFnZXNFbmRwb2ludCA9IGNvbmZpZy5zZXJ2aWNlVXJpICsgJy92MS9sb2NhbGUvbGFuZ3VhZ2VzJztcbiAgICB0aGlzLmxvY2FsZXNFbmRwb2ludCA9IGNvbmZpZy5zZXJ2aWNlVXJpICsgJy92MS9sb2NhbGUvbG9jYWxlcyc7XG4gICAgdGhpcy5wbGFjZXNFbmRwb2ludCA9IGNvbmZpZy5zZXJ2aWNlVXJpICsgJy92MS9nZW8vY2l0aWVzJztcbiAgICB0aGlzLnRpbWVab25lc0VuZHBvaW50ID0gY29uZmlnLnNlcnZpY2VVcmkgKyAnL3YxL2xvY2FsZS90aW1lem9uZXMnO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYnVpbGRQYWdpbmdQYXJhbXMocmVxdWVzdDogRmluZENvbGxlY3Rpb25SZXF1ZXN0KTogSHR0cFBhcmFtcyB7XG5cbiAgICByZXR1cm4gbmV3IEh0dHBQYXJhbXMoKVxuICAgICAgLnNldCgnb2Zmc2V0JywgJycgKyByZXF1ZXN0Lm9mZnNldClcbiAgICAgIC5zZXQoJ2xpbWl0JywgJycgKyByZXF1ZXN0LmxpbWl0KVxuICAgICAgLnNldCgnaGF0ZW9hc01vZGUnLCAnZmFsc2UnKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHRvTG9jYXRpb25TdHJpbmcobmVhckxvY2F0aW9uOiBOZWFyTG9jYXRpb25SZXF1ZXN0KTogc3RyaW5nIHtcblxuICAgIGxldCBsb2NhdGlvblN0cmluZyA9ICcnO1xuXG4gICAgaWYgKG5lYXJMb2NhdGlvbi5sYXRpdHVkZSA+IDApIHtcbiAgICAgIGxvY2F0aW9uU3RyaW5nICs9ICcrJztcbiAgICB9XG5cbiAgICBsb2NhdGlvblN0cmluZyArPSBuZWFyTG9jYXRpb24ubGF0aXR1ZGU7XG5cbiAgICBpZiAobmVhckxvY2F0aW9uLmxvbmdpdHVkZSA+IDApIHtcbiAgICAgIGxvY2F0aW9uU3RyaW5nICs9ICcrJztcbiAgICB9XG5cbiAgICBsb2NhdGlvblN0cmluZyArPSBuZWFyTG9jYXRpb24ubG9uZ2l0dWRlO1xuXG4gICAgcmV0dXJuIGxvY2F0aW9uU3RyaW5nO1xuICB9XG5cbiAgZmluZEFkbWluRGl2aXNpb25zKHJlcXVlc3Q6IEZpbmRBZG1pbkRpdmlzaW9uc1JlcXVlc3QpOiBPYnNlcnZhYmxlPEdlb1Jlc3BvbnNlPFBsYWNlU3VtbWFyeVtdPj4ge1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIGlmIChyZXF1ZXN0LmNvdW50cnlJZHMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2NvdW50cnlJZHMnLCByZXF1ZXN0LmNvdW50cnlJZHMuam9pbignLCcpKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5leGNsdWRlZENvdW50cnlJZHMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2V4Y2x1ZGVkQ291bnRyeUlkcycsIHJlcXVlc3QuZXhjbHVkZWRDb3VudHJ5SWRzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubmFtZVByZWZpeCkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbmFtZVByZWZpeCcsIHJlcXVlc3QubmFtZVByZWZpeCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubWluUG9wdWxhdGlvbikge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbWluUG9wdWxhdGlvbicsICcnICsgcmVxdWVzdC5taW5Qb3B1bGF0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC50aW1lWm9uZUlkcykge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgndGltZVpvbmVJZHMnLCByZXF1ZXN0LnRpbWVab25lSWRzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuYXNjaWlNb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdhc2NpaU1vZGUnLCAnJyArIHJlcXVlc3QuYXNjaWlNb2RlKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5sYW5ndWFnZUNvZGUpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2xhbmd1YWdlQ29kZScsIHJlcXVlc3QubGFuZ3VhZ2VDb2RlKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5zb3J0RGlyZWN0aXZlcykge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnc29ydCcsIHJlcXVlc3Quc29ydERpcmVjdGl2ZXMuam9pbignLCcpKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5pbmNsdWRlRGVsZXRlZCkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnaW5jbHVkZURlbGV0ZWQnLCByZXF1ZXN0LmluY2x1ZGVEZWxldGVkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxHZW9SZXNwb25zZTxQbGFjZVN1bW1hcnlbXT4+KFxuICAgICAgdGhpcy5hZG1pbkRpdmlzaW9uc0VuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmaW5kUGxhY2UocmVxdWVzdDogR2V0UGxhY2VEZXRhaWxzUmVxdWVzdCk6IE9ic2VydmFibGU8R2VvUmVzcG9uc2U8UGxhY2VEZXRhaWxzPj4ge1xuXG4gICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmJ1aWxkUGxhY2VFbmRwb2ludChyZXF1ZXN0LnBsYWNlSWQpO1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IG5ldyBIdHRwUGFyYW1zKCk7XG5cbiAgICBpZiAocmVxdWVzdC5hc2NpaU1vZGUpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2FzY2lpTW9kZScsICcnICsgcmVxdWVzdC5hc2NpaU1vZGUpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lmxhbmd1YWdlQ29kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbGFuZ3VhZ2VDb2RlJywgcmVxdWVzdC5sYW5ndWFnZUNvZGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPFBsYWNlRGV0YWlscz4+KFxuICAgICAgZW5kcG9pbnQsXG4gICAgICB7XG4gICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGZpbmRQbGFjZXMocmVxdWVzdDogRmluZFBsYWNlc1JlcXVlc3QpOiBPYnNlcnZhYmxlPEdlb1Jlc3BvbnNlPFBsYWNlU3VtbWFyeVtdPj4ge1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIGlmIChyZXF1ZXN0LmNvdW50cnlJZHMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2NvdW50cnlJZHMnLCByZXF1ZXN0LmNvdW50cnlJZHMuam9pbignLCcpKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5leGNsdWRlZENvdW50cnlJZHMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2V4Y2x1ZGVkQ291bnRyeUlkcycsIHJlcXVlc3QuZXhjbHVkZWRDb3VudHJ5SWRzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubmFtZVByZWZpeCkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbmFtZVByZWZpeCcsIHJlcXVlc3QubmFtZVByZWZpeCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubWluUG9wdWxhdGlvbikge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbWluUG9wdWxhdGlvbicsICcnICsgcmVxdWVzdC5taW5Qb3B1bGF0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC50aW1lWm9uZUlkcykge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgndGltZVpvbmVJZHMnLCByZXF1ZXN0LnRpbWVab25lSWRzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QudHlwZXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ3R5cGVzJywgcmVxdWVzdC50eXBlcy5qb2luKCcsJykpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LmFzY2lpTW9kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnYXNjaWlNb2RlJywgJycgKyByZXF1ZXN0LmFzY2lpTW9kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubGFuZ3VhZ2VDb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdsYW5ndWFnZUNvZGUnLCByZXF1ZXN0Lmxhbmd1YWdlQ29kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Quc29ydERpcmVjdGl2ZXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ3NvcnQnLCByZXF1ZXN0LnNvcnREaXJlY3RpdmVzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuaW5jbHVkZURlbGV0ZWQpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2luY2x1ZGVEZWxldGVkJywgcmVxdWVzdC5pbmNsdWRlRGVsZXRlZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8UGxhY2VTdW1tYXJ5W10+PihcbiAgICAgIHRoaXMucGxhY2VzRW5kcG9pbnQsXG4gICAgICB7XG4gICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGZpbmRQbGFjZXNOZWFyTG9jYXRpb24ocmVxdWVzdDogRmluZFBsYWNlc05lYXJMb2NhdGlvblJlcXVlc3QpOiBPYnNlcnZhYmxlPEdlb1Jlc3BvbnNlPFBsYWNlU3VtbWFyeVtdPj4ge1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIHBhcmFtcyA9IHBhcmFtc1xuICAgICAgLnNldCgncmFkaXVzJywgJycgKyByZXF1ZXN0LmxvY2F0aW9uLnJhZGl1cylcbiAgICAgIC5zZXQoJ2Rpc3RhbmNlVW5pdCcsIHJlcXVlc3QubG9jYXRpb24uZGlzdGFuY2VVbml0KTtcblxuICAgIGlmIChyZXF1ZXN0Lm1pblBvcHVsYXRpb24pIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ21pblBvcHVsYXRpb24nLCAnJyArIHJlcXVlc3QubWluUG9wdWxhdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubmFtZVByZWZpeCkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbmFtZVByZWZpeCcsIHJlcXVlc3QubmFtZVByZWZpeCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QudHlwZXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ3R5cGVzJywgcmVxdWVzdC50eXBlcy5qb2luKCcsJykpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LmFzY2lpTW9kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnYXNjaWlNb2RlJywgJycgKyByZXF1ZXN0LmFzY2lpTW9kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubGFuZ3VhZ2VDb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdsYW5ndWFnZUNvZGUnLCByZXF1ZXN0Lmxhbmd1YWdlQ29kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Quc29ydERpcmVjdGl2ZXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ3NvcnQnLCByZXF1ZXN0LnNvcnREaXJlY3RpdmVzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuaW5jbHVkZURlbGV0ZWQpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2luY2x1ZGVEZWxldGVkJywgcmVxdWVzdC5pbmNsdWRlRGVsZXRlZCk7XG4gICAgfVxuXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgSHR0cENsaWVudCAnKycgZW5jb2RpbmcgYnVnLlxuICAgIGNvbnN0IGxvY2F0aW9uSWQgPSBHZW9EYlNlcnZpY2VcbiAgICAgIC50b0xvY2F0aW9uU3RyaW5nKHJlcXVlc3QubG9jYXRpb24pXG4gICAgICAucmVwbGFjZSgnKycsICclMkInKTtcblxuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5wbGFjZXNFbmRwb2ludCArICc/bG9jYXRpb249JyArIGxvY2F0aW9uSWQ7XG5cbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxHZW9SZXNwb25zZTxQbGFjZVN1bW1hcnlbXT4+KFxuICAgICAgZW5kcG9pbnQsXG4gICAgICB7XG4gICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGZpbmRQbGFjZXNOZWFyUGxhY2UocmVxdWVzdDogRmluZFBsYWNlc05lYXJQbGFjZVJlcXVlc3QpOiBPYnNlcnZhYmxlPEdlb1Jlc3BvbnNlPFBsYWNlU3VtbWFyeVtdPj4ge1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIHBhcmFtcyA9IHBhcmFtc1xuICAgICAgLnNldCgncmFkaXVzJywgJycgKyByZXF1ZXN0LnJhZGl1cylcbiAgICAgIC5zZXQoJ2Rpc3RhbmNlVW5pdCcsIHJlcXVlc3QuZGlzdGFuY2VVbml0KTtcblxuICAgIGlmIChyZXF1ZXN0Lm1pblBvcHVsYXRpb24pIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ21pblBvcHVsYXRpb24nLCAnJyArIHJlcXVlc3QubWluUG9wdWxhdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QudHlwZXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ3R5cGVzJywgcmVxdWVzdC50eXBlcy5qb2luKCcsJykpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LmFzY2lpTW9kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnYXNjaWlNb2RlJywgJycgKyByZXF1ZXN0LmFzY2lpTW9kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubGFuZ3VhZ2VDb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdsYW5ndWFnZUNvZGUnLCByZXF1ZXN0Lmxhbmd1YWdlQ29kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Quc29ydERpcmVjdGl2ZXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ3NvcnQnLCByZXF1ZXN0LnNvcnREaXJlY3RpdmVzLmpvaW4oJywnKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuaW5jbHVkZURlbGV0ZWQpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2luY2x1ZGVEZWxldGVkJywgcmVxdWVzdC5pbmNsdWRlRGVsZXRlZCk7XG4gICAgfVxuXG4gICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLnBsYWNlc0VuZHBvaW50ICsgJy8nICsgcmVxdWVzdC5wbGFjZUlkICsgJy9uZWFyYnlDaXRpZXMnO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8UGxhY2VTdW1tYXJ5W10+PihcbiAgICAgIGVuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmaW5kQ291bnRyaWVzKHJlcXVlc3Q6IEZpbmRDb3VudHJpZXNSZXF1ZXN0KTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxDb3VudHJ5U3VtbWFyeVtdPj4ge1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIGlmIChyZXF1ZXN0LmN1cnJlbmN5Q29kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnY3VycmVuY3lDb2RlJywgcmVxdWVzdC5jdXJyZW5jeUNvZGUpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lm5hbWVQcmVmaXgpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ25hbWVQcmVmaXgnLCByZXF1ZXN0Lm5hbWVQcmVmaXgpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LmFzY2lpTW9kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnYXNjaWlNb2RlJywgJycgKyByZXF1ZXN0LmFzY2lpTW9kZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QubGFuZ3VhZ2VDb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdsYW5ndWFnZUNvZGUnLCByZXF1ZXN0Lmxhbmd1YWdlQ29kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8Q291bnRyeVN1bW1hcnlbXT4+KFxuICAgICAgdGhpcy5jb3VudHJpZXNFbmRwb2ludCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZmluZENvdW50cnkocmVxdWVzdDogR2V0Q291bnRyeURldGFpbHNSZXF1ZXN0KTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxDb3VudHJ5RGV0YWlscz4+IHtcblxuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5jb3VudHJpZXNFbmRwb2ludCArICcvJyArIHJlcXVlc3QuY291bnRyeUlkO1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IG5ldyBIdHRwUGFyYW1zKCk7XG5cbiAgICBpZiAocmVxdWVzdC5hc2NpaU1vZGUpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2FzY2lpTW9kZScsICcnICsgcmVxdWVzdC5hc2NpaU1vZGUpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lmxhbmd1YWdlQ29kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbGFuZ3VhZ2VDb2RlJywgcmVxdWVzdC5sYW5ndWFnZUNvZGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPENvdW50cnlEZXRhaWxzPj4oXG4gICAgICBlbmRwb2ludCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgIH0pO1xuICB9XG5cbiAgZmluZEN1cnJlbmNpZXMocmVxdWVzdDogRmluZEN1cnJlbmNpZXNSZXF1ZXN0KTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxDdXJyZW5jeVtdPj4ge1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIGlmIChyZXF1ZXN0LmNvdW50cnlJZCkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnY291bnRyeUlkJywgcmVxdWVzdC5jb3VudHJ5SWQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPEN1cnJlbmN5W10+PihcbiAgICAgIHRoaXMuY3VycmVuY2llc0VuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmaW5kTGFuZ3VhZ2VzKHJlcXVlc3Q6IEZpbmRDb2xsZWN0aW9uUmVxdWVzdCk6IE9ic2VydmFibGU8R2VvUmVzcG9uc2U8TGFuZ3VhZ2VbXT4+IHtcblxuICAgIGNvbnN0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPExvY2FsZVtdPj4oXG4gICAgICB0aGlzLmxhbmd1YWdlc0VuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmaW5kTG9jYWxlcyhyZXF1ZXN0OiBGaW5kQ29sbGVjdGlvblJlcXVlc3QpOiBPYnNlcnZhYmxlPEdlb1Jlc3BvbnNlPExvY2FsZVtdPj4ge1xuXG4gICAgY29uc3QgcGFyYW1zOiBIdHRwUGFyYW1zID0gR2VvRGJTZXJ2aWNlLmJ1aWxkUGFnaW5nUGFyYW1zKHJlcXVlc3QpO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8TG9jYWxlW10+PihcbiAgICAgIHRoaXMubG9jYWxlc0VuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmaW5kUmVnaW9uKHJlcXVlc3Q6IEdldFJlZ2lvbkRldGFpbHNSZXF1ZXN0KTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxSZWdpb25EZXRhaWxzPj4ge1xuXG4gICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmJ1aWxkUmVnaW9uc0VuZHBvaW50KHJlcXVlc3QuY291bnRyeUlkKSArICcvJyArIHJlcXVlc3QucmVnaW9uQ29kZTtcblxuICAgIGxldCBwYXJhbXM6IEh0dHBQYXJhbXMgPSBuZXcgSHR0cFBhcmFtcygpO1xuXG4gICAgaWYgKHJlcXVlc3QuYXNjaWlNb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdhc2NpaU1vZGUnLCAnJyArIHJlcXVlc3QuYXNjaWlNb2RlKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5sYW5ndWFnZUNvZGUpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2xhbmd1YWdlQ29kZScsIHJlcXVlc3QubGFuZ3VhZ2VDb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxHZW9SZXNwb25zZTxSZWdpb25EZXRhaWxzPj4oXG4gICAgICBlbmRwb2ludCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgIH0pO1xuICB9XG5cbiAgZmluZFJlZ2lvblBsYWNlcyhyZXF1ZXN0OiBGaW5kUmVnaW9uQ2l0aWVzUmVxdWVzdCk6IE9ic2VydmFibGU8R2VvUmVzcG9uc2U8UGxhY2VTdW1tYXJ5W10+PiB7XG5cbiAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYnVpbGRSZWdpb25FbmRwb2ludChyZXF1ZXN0LmNvdW50cnlJZCwgcmVxdWVzdC5yZWdpb25Db2RlKSArICcvY2l0aWVzJztcblxuICAgIGxldCBwYXJhbXM6IEh0dHBQYXJhbXMgPSBHZW9EYlNlcnZpY2UuYnVpbGRQYWdpbmdQYXJhbXMocmVxdWVzdCk7XG5cbiAgICBpZiAocmVxdWVzdC5taW5Qb3B1bGF0aW9uKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdtaW5Qb3B1bGF0aW9uJywgJycgKyByZXF1ZXN0Lm1pblBvcHVsYXRpb24pO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LnR5cGVzKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCd0eXBlcycsIHJlcXVlc3QudHlwZXMuam9pbignLCcpKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5hc2NpaU1vZGUpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2FzY2lpTW9kZScsICcnICsgcmVxdWVzdC5hc2NpaU1vZGUpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lmxhbmd1YWdlQ29kZSkge1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbGFuZ3VhZ2VDb2RlJywgcmVxdWVzdC5sYW5ndWFnZUNvZGUpO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0LnNvcnREaXJlY3RpdmVzKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdzb3J0JywgcmVxdWVzdC5zb3J0RGlyZWN0aXZlcy5qb2luKCcsJykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPFBsYWNlU3VtbWFyeVtdPj4oXG4gICAgICBlbmRwb2ludCxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZmluZFJlZ2lvbnMocmVxdWVzdDogRmluZFJlZ2lvbnNSZXF1ZXN0KTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxSZWdpb25TdW1tYXJ5W10+PiB7XG5cbiAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYnVpbGRSZWdpb25zRW5kcG9pbnQocmVxdWVzdC5jb3VudHJ5SWQpO1xuXG4gICAgbGV0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIGlmIChyZXF1ZXN0Lm5hbWVQcmVmaXgpIHtcbiAgICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgnbmFtZVByZWZpeCcsIHJlcXVlc3QubmFtZVByZWZpeCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3QuYXNjaWlNb2RlKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMuc2V0KCdhc2NpaU1vZGUnLCAnJyArIHJlcXVlc3QuYXNjaWlNb2RlKTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5sYW5ndWFnZUNvZGUpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcy5zZXQoJ2xhbmd1YWdlQ29kZScsIHJlcXVlc3QubGFuZ3VhZ2VDb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxHZW9SZXNwb25zZTxSZWdpb25TdW1tYXJ5W10+PihcbiAgICAgIGVuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmaW5kVGltZVpvbmVzKHJlcXVlc3Q6IEZpbmRDb2xsZWN0aW9uUmVxdWVzdCk6IE9ic2VydmFibGU8R2VvUmVzcG9uc2U8VGltZVpvbmVbXT4+IHtcblxuICAgIGNvbnN0IHBhcmFtczogSHR0cFBhcmFtcyA9IEdlb0RiU2VydmljZS5idWlsZFBhZ2luZ1BhcmFtcyhyZXF1ZXN0KTtcblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPFRpbWVab25lW10+PihcbiAgICAgIHRoaXMudGltZVpvbmVzRW5kcG9pbnQsXG4gICAgICB7XG4gICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGdldCBhcGlLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcuYXBpS2V5O1xuICB9XG5cbiAgc2V0QXBpS2V5KGFwaUtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5jb25maWcuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgZ2V0UGxhY2VEYXRlVGltZShpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxzdHJpbmc+PiB7XG5cbiAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYnVpbGRQbGFjZUVuZHBvaW50KGlkKSArICcvZGF0ZVRpbWUnO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8c3RyaW5nPj4oZW5kcG9pbnQpO1xuICB9XG5cbiAgZ2V0UGxhY2VEaXN0YW5jZShyZXF1ZXN0OiBHZXRQbGFjZURpc3RhbmNlUmVxdWVzdCk6IE9ic2VydmFibGU8R2VvUmVzcG9uc2U8bnVtYmVyPj4ge1xuXG4gICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmJ1aWxkUGxhY2VFbmRwb2ludChyZXF1ZXN0LnRvUGxhY2VJZCkgKyAnL2Rpc3RhbmNlJztcblxuICAgIGNvbnN0IHBhcmFtczogSHR0cFBhcmFtcyA9IG5ldyBIdHRwUGFyYW1zKClcbiAgICAgIC5zZXQoJ2Zyb21QbGFjZUlkJywgJycgKyByZXF1ZXN0LmZyb21QbGFjZUlkKVxuICAgICAgLnNldCgnZGlzdGFuY2VVbml0JywgJycgKyByZXF1ZXN0LmRpc3RhbmNlVW5pdCk7XG5cbiAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxHZW9SZXNwb25zZTxudW1iZXI+PihcbiAgICAgIGVuZHBvaW50LFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBnZXRQbGFjZVRpbWUocGxhY2VJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxzdHJpbmc+PiB7XG5cbiAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYnVpbGRQbGFjZUVuZHBvaW50KHBsYWNlSWQpICsgJy90aW1lJztcblxuICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEdlb1Jlc3BvbnNlPHN0cmluZz4+KGVuZHBvaW50KTtcbiAgfVxuXG4gIGdldFRpbWVab25lRGF0ZVRpbWUoem9uZUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEdlb1Jlc3BvbnNlPHN0cmluZz4+IHtcblxuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5idWlsZFRpbWVab25lRW5kcG9pbnQoem9uZUlkKSArICcvZGF0ZVRpbWUnO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8c3RyaW5nPj4oZW5kcG9pbnQpO1xuICB9XG5cbiAgZ2V0VGltZVpvbmVUaW1lKHpvbmVJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxHZW9SZXNwb25zZTxzdHJpbmc+PiB7XG5cbiAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYnVpbGRUaW1lWm9uZUVuZHBvaW50KHpvbmVJZCkgKyAnL3RpbWUnO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8R2VvUmVzcG9uc2U8c3RyaW5nPj4oZW5kcG9pbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFBsYWNlRW5kcG9pbnQob2xhY2VJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5wbGFjZXNFbmRwb2ludCArICcvJyArIG9sYWNlSWQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkUmVnaW9uRW5kcG9pbnQoY291bnRyeUlkOiBzdHJpbmcsIHJlZ2lvbkNvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRSZWdpb25zRW5kcG9pbnQoY291bnRyeUlkKSArICcvJyArIHJlZ2lvbkNvZGU7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkUmVnaW9uc0VuZHBvaW50KGNvdW50cnlJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudHJpZXNFbmRwb2ludCArICcvJyArIGNvdW50cnlJZCArICcvcmVnaW9ucyc7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkVGltZVpvbmVFbmRwb2ludCh6b25lSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudGltZVpvbmVzRW5kcG9pbnQgKyAnLycgKyB6b25lSWQ7XG4gIH1cbn1cbiJdfQ==